<!DOCTYPE html>
<html lang="en">
<head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-P853XZ9R');</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=GT-P8VC8JF3"></script>
    
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'GT-P8VC8JF3');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat with any model | Shafayat Hossain</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.0/lib/marked.umd.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/SplitText.min.js"></script>
    <link rel="icon" href="s.ico" type="image/x-icon">
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css">
    <style>
        /* Reset default styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Google Sans', sans-serif;
            display: flex;
            flex-direction: column;
            height: 100vh;
            background-color: #f3f4f7;
            line-height: 1.5;
            color: #202124;
        }

        button, input, select {
            font-family: 'Google Sans', sans-serif;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }

        .container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .chat-container {
            flex: 0 0 auto;
            width: 100%;
            max-width: 600px;
            margin: auto;
            display: flex;
            flex-direction: column;
            height: 100vh;
            background-color: #fff;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border: 1px solid #e0e0e0;
        }

        .chat-header {
            flex: 0 0 auto;
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid #e2e8f0;
            background: #fff;
            color: #202124;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
        }

        .chat-header h1 {
            font-size: 1.5rem;
            font-weight: 500;
            overflow: hidden;
            white-space: nowrap;
            color: #202124;
        }

        .chat-header .model-display {
            font-size: 0.875rem;
            color: #5f6368;
            max-width: 100px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .chat-header #model-select-btn {
            border-radius: 1.5rem;
            padding: 0.5rem;
            height: 2rem;
            width: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background-image: linear-gradient(to right, #b0e0e6, #87cefa);
            color: #fff;
            border: none;
            cursor: pointer;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: background-image 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease;
        }

        .chat-header #model-select-btn:hover {
            background-image: linear-gradient(to right, #add8e6, #87ceeb);
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
        }

        .chat-header #model-select-btn:active {
            background-image: linear-gradient(to right, #a9d3d1, #7ec0ee);
            transform: translateY(0);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        .chat-messages {
            flex: 1 1 auto;
            overflow-y: auto;
            padding: 1rem 1.5rem;
            background-color: #fff;
        }

        .chat-input-area {
            flex: 0 0 auto;
            padding: 1.25rem 1.5rem;
            border-top: 1px solid #e2e8f0;
            background-color: #fff;
            display: flex;
        }

        .message {
            padding: 0.75rem 1rem;
            border-radius: 1.5rem;
            margin-bottom: 0.75rem;
            max-width: 90%;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            font-size: 1rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .message:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .sent-message {
            background: linear-gradient(90deg, #b0e0e6 0%, #87cefa 100%);
            color: #00008b;
            margin-left: auto;
            border-top-right-radius: 0.25rem;
            border-bottom-right-radius: 0.25rem;
            flex-direction: row-reverse;
        }

        .received-message {
            background: linear-gradient(90deg, #dda0dd 0%, #d8bfd8 100%);
            color: #4b0082;
            margin-right: auto;
            border-top-left-radius: 0.25rem;
            border-bottom-left-radius: 0.25rem;
        }

        .loading-message {
            background: linear-gradient(90deg, #dda0dd 0%, #d8bfd8 100%);
            color: #4b0082;
            margin-right: auto;
            border-top-left-radius: 0.25rem;
            border-bottom-left-radius: 0.25rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .error-message {
            border: 1px solid #ff4d4f;
            background: linear-gradient(90deg, #ff9999 0%, #ffcccc 100%);
            color: #a8071a;
        }

        .loading-message .dots::after {
            content: '';
            animation: dots 1.5s infinite;
        }

        @keyframes dots {
            0% { content: ''; }
            33% { content: '.'; }
            66% { content: '..'; }
            100% { content: '...'; }
        }

        .message-icon {
            font-size: 16px;
            color: #fff;
            vertical-align: middle;
        }

        #message-input {
            flex: 1;
            border-radius: 2rem;
            padding: 0 1.5rem;
            height: 3rem;
            font-size: 1rem;
            border: 1px solid #e0e0e0;
            outline: none;
            transition: border-color 0.2s ease, box-shadow 0.2s ease, opacity 0.2s ease;
            color: #202124;
            background-color: #fff;
            line-height: 3rem;
        }

        #message-input:focus {
            border-color: #1a73e8;
            box-shadow: 0 0 0 4px rgba(26, 115, 232, 0.1);
        }

        #message-input:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            background-color: #f8f9fa;
        }

        #send-button {
            border-radius: 2rem;
            padding: 0 1.75rem;
            height: 3rem;
            font-size: 1rem;
            background-image: linear-gradient(to right, #b0e0e6, #87cefa);
            color: #fff;
            transition: background-image 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease, opacity 0.2s ease;
            cursor: pointer;
            border: none;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #send-button:hover:not(:disabled) {
            background-image: linear-gradient(to right, #add8e6, #87ceeb);
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
        }

        #send-button:active:not(:disabled) {
            background-image: linear-gradient(to right, #a9d3d1, #7ec0ee);
            transform: translateY(0);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        #send-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        #message-input::placeholder {
            color: #9b9b9b;
            font-size: 1rem;
        }

        .markdown-body {
            font-family: 'Google Sans', sans-serif;
            font-size: 1rem;
            line-height: 1.75;
            color: #202124;
        }

        .markdown-body h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .markdown-body h2 {
            font-size: 2rem;
            margin-bottom: 0.8rem;
            font-weight: 600;
        }

        .markdown-body h3 {
            font-size: 1.5rem;
            margin-bottom: 0.6rem;
            font-weight: 500;
        }

        .markdown-body p {
            margin-bottom: 1rem;
        }

        .markdown-body strong {
            font-weight: 600;
        }

        .markdown-body a {
            color: #1a73e8;
            text-decoration: none;
        }

        .markdown-body a:hover {
            text-decoration: underline;
        }

        .markdown-body ul {
            list-style-type: disc;
            padding-left: 2rem;
            margin-bottom: 1rem;
        }

        .markdown-body ol {
            list-style-type: decimal;
            padding-left: 2rem;
            margin-bottom: 1rem;
        }

        .markdown-body li {
            margin-bottom: 0.25rem;
        }

        .markdown-body code {
            padding: 0.25rem 0.5rem;
            margin: 0 0.25rem;
            background-color: #f0f4f8;
            border-radius: 6px;
            font-size: 0.9rem;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        }

        .markdown-body pre {
            background-color: #f0f4f8;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            overflow-x: auto;
            font-size: 0.9rem;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            line-height: 1.5;
        }

        .markdown-body blockquote {
            border-left: 4px solid #1a73e8;
            padding-left: 1rem;
            margin-bottom: 1rem;
            font-style: italic;
            color: #5f6368;
        }

        .material-icons {
            font-family: 'Material Icons';
            font-weight: normal;
            font-style: normal;
            font-size: 24px;
            line-height: 1;
            letter-spacing: normal;
            text-transform: none;
            display: inline-block;
            white-space: nowrap;
            word-wrap: normal;
            direction: ltr;
            color: #fff;
        }

        #button-container {
            display: flex;
            gap: 1rem;
            margin-left: 1rem;
        }

        .prompt-btn {
            flex: 1;
            margin-right: 0.21rem;
            border-radius: 2rem;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            border: none;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out, background-color 0.3s;
            background-image: linear-gradient(to right, #b0e0e6, #87cefa);
            color: #fff;
            height: 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .prompt-btn:nth-of-type(odd) {
            background-image: linear-gradient(to right, #b0e0e6, #87cefa);
            color: #fff;
        }

        .prompt-btn:nth-of-type(odd):hover {
            background-image: linear-gradient(to right, #add8e6, #87ceeb);
            transform: translateY(-2px);
            box-shadow: 0 3px 7px rgba(0, 0, 0, 0.15);
        }

        .prompt-btn:nth-of-type(odd):active {
            background-image: linear-gradient(to right, #a9d3d1, #7ec0ee);
            transform: translateY(0);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        .prompt-btn:nth-of-type(even) {
            background-color: #f8f9fa;
            color: #202124;
        }

        .prompt-btn:nth-of-type(even):hover {
            background-color: #f1f3f4;
            transform: translateY(-2px);
            box-shadow: 0 3px 7px rgba(0, 0, 0, 0.15);
        }

        .prompt-btn:nth-of-type(even):active {
            background-color: #e8eaed;
            transform: translateY(0);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        #model-menu {
            position: absolute;
            top: calc(100% + 0.5rem);
            right: 1rem;
            background-color: #fff;
            border-radius: 0.5rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
            display: none;
            z-index: 1001;
            padding: 1rem;
            width: 280px;
            max-height: 300px;
            overflow-y: auto;
        }

        .model-selector {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .model-label {
            font-size: 0.95rem;
            color: #202124;
            font-weight: 500;
        }

        #model-dropdown {
            padding: 0.5rem;
            border-radius: 0.5rem;
            border: 1px solid #e0e0e0;
            font-size: 0.95rem;
            background-color: #f8f9fa;
            outline: none;
            cursor: pointer;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
            color: #202124;
            background-image: url('data:image/svg+xml;charset=UTF-8,%3csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="%23202124" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"%3e%3cpolyline points="6 9 12 15 18 9"%3e%3c/polyline%3e%3c/svg%3e');
            background-repeat: no-repeat;
            background-position: right 0.5rem center;
            background-size: 1rem;
        }

        #model-dropdown:focus {
            border-color: #1a73e8;
            box-shadow: 0 0 0 4px rgba(26, 115, 232, 0.1);
        }

        #model-dropdown option {
            padding: 0.5rem;
            background-color: #fff;
            color: #202124;
        }

        .model-tooltip {
            position: absolute;
            top: calc(100% + 1rem);
            right: 1rem;
            background-color: #fff;
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            font-size: 0.95rem;
            color: #333;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
            z-index: 1002;
        }

        @media (max-width: 768px) {
            .chat-container {
                max-width: 100%;
                border-radius: 0;
                box-shadow: none;
                border: none;
            }

            #model-menu {
                right: 0.5rem;
                width: calc(100% - 1rem);
            }

            .model-tooltip {
                right: 0.5rem;
                width: calc(100% - 1rem);
            }
        }

        /* Dark mode */
        :where([data-theme=dark], .dark) body {
            background-color: #1c2526;
        }

        :where([data-theme=dark], .dark) .chat-container {
            background-color: #2a2f3b;
            border-color: #3a3f4b;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        :where([data-theme=dark], .dark) .chat-header {
            background-color: #2a2f3b;
            border-bottom-color: #3a3f4b;
            color: #e0e0e0;
        }

        :where([data-theme=dark], .dark) .chat-header h1 {
            color: #e0e0e0;
        }

        :where([data-theme=dark], .dark) .chat-header .model-display {
            color: #b0b0b0;
        }

        :where([data-theme=dark], .dark) .chat-header #model-select-btn {
            background-image: linear-gradient(to right, #4a7fa8, #5a9bd4);
        }

        :where([data-theme=dark], .dark) .chat-header #model-select-btn:hover {
            background-image: linear-gradient(to right, #5a9bd4, #6ab0e0);
        }

        :where([data-theme=dark], .dark) .chat-header #model-select-btn:active {
            background-image: linear-gradient(to right, #3a6f98, #4a8fc4);
        }

        :where([data-theme=dark], .dark) .chat-messages {
            background-color: #2a2f3b;
        }

        :where([data-theme=dark], .dark) .chat-input-area {
            background-color: #2a2f3b;
            border-top-color: #3a3f4b;
        }

        :where([data-theme=dark], .dark) .sent-message {
            background: linear-gradient(90deg, #4a7fa8 0%, #5a9bd4 100%);
            color: #e0e0e0;
        }

        :where([data-theme=dark], .dark) .received-message,
        :where([data-theme=dark], .dark) .loading-message {
            background: linear-gradient(90deg, #7b5e8e 0%, #9575a8 100%);
            color: #e0e0e0;
        }

        :where([data-theme=dark], .dark) .error-message {
            border: 1px solid #cc3333;
            background: linear-gradient(90deg, #a8071a 0%, #cc3333 100%);
            color: #ffe6e6;
        }

        :where([data-theme=dark], .dark) .message-icon {
            color: #e0e0e0;
        }

        :where([data-theme=dark], .dark) #message-input {
            background-color: #3a3f4b;
            border-color: #4a4f5b;
            color: #e0e0e0;
        }

        :where([data-theme=dark], .dark) #message-input::placeholder {
            color: #8a8a8a;
        }

        :where([data-theme=dark], .dark) #message-input:disabled {
            background-color: #4a4f5b;
            opacity: 0.6;
            cursor: not-allowed;
        }

        :where([data-theme=dark], .dark) #send-button {
            background-image: linear-gradient(to right, #4a7fa8, #5a9bd4);
        }

        :where([data-theme=dark], .dark) #send-button:hover:not(:disabled) {
            background-image: linear-gradient(to right, #5a9bd4, #6ab0e0);
        }

        :where([data-theme=dark], .dark) #send-button:active:not(:disabled) {
            background-image: linear-gradient(to right, #3a6f98, #4a8fc4);
        }

        :where([data-theme=dark], .dark) #send-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        :where([data-theme=dark], .dark) .markdown-body {
            color: #e0e0e0;
        }

        :where([data-theme=dark], .dark) .markdown-body h1,
        :where([data-theme=dark], .dark) .markdown-body h2,
        :where([data-theme=dark], .dark) .markdown-body h3,
        :where([data-theme=dark], .dark) .markdown-body strong {
            color: #e0e0e0;
        }

        :where([data-theme=dark], .dark) .markdown-body a {
            color: #4a9bff;
        }

        :where([data-theme=dark], .dark) .markdown-body code {
            background-color: #3a3f4b;
            color: #e0e0e0;
        }

        :where([data-theme=dark], .dark) .markdown-body pre {
            background-color: #3a3f4b;
            color: #e0e0e0;
        }

        :where([data-theme=dark], .dark) .markdown-body blockquote {
            border-left-color: #4a9bff;
            color: #b0b0b0;
        }

        :where([data-theme=dark], .dark) #model-menu {
            background-color: #2a2f3b;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        :where([data-theme=dark], .dark) .model-label {
            color: #e0e0e0;
        }

        :where([data-theme=dark], .dark) #model-dropdown {
            background-color: #3a3f4b;
            border-color: #4a4f5b;
            color: #e0e0e0;
            background-image: url('data:image/svg+xml;charset=UTF-8,%3csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="%23e0e0e0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"%3e%3cpolyline points="6 9 12 15 18 9"%3e%3c/polyline%3e%3c/svg%3e');
        }

        :where([data-theme=dark], .dark) #model-dropdown option {
            background-color: #2a2f3b;
            color: #e0e0e0;
        }

        :where([data-theme=dark], .dark) .model-tooltip {
            background-color: #2a2f3b;
            color: #e0e0e0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>
<body class="container">
    <div class="chat-container">
        <div class="chat-header">
            <h1 class="logo-txt">Chat with any LLM</h1>
            <span class="model-display" id="model-display">gpt-4o-mini</span>
            <button id="model-select-btn" aria-label="Change model" title="Change Model">
                <span class="material-icons">tune</span>
            </button>
            <div id="model-menu">
                <div class="model-selector">
                    <label for="model-dropdown" class="model-label">Select Model:</label>
                    <select id="model-dropdown" onchange="handleModelChange()">
                        <option value="gpt-4o-mini" selected>gpt-4o-mini (default)</option>
                        <option value="gpt-4o">gpt-4o</option>
                        <option value="o1">o1</option>
                        <option value="o1-mini">o1-mini</option>
                        <option value="o1-pro">o1-pro</option>
                        <option value="o3">o3</option>
                        <option value="o3-mini">o3-mini</option>
                        <option value="o4-mini">o4-mini</option>
                        <option value="gpt-4.1">gpt-4.1</option>
                        <option value="gpt-4.1-mini">gpt-4.1-mini</option>
                        <option value="gpt-4.1-nano">gpt-4.1-nano</option>
                        <option value="gpt-4.5-preview">gpt-4.5-preview</option>
                        <option value="claude-3-7-sonnet">claude-3-7-sonnet</option>
                        <option value="claude-3-5-sonnet">claude-3-5-sonnet</option>
                        <option value="deepseek-chat">deepseek-chat</option>
                        <option value="deepseek-reasoner">deepseek-reasoner</option>
                        <option value="gemini-2.0-flash">gemini-2.0-flash</option>
                        <option value="gemini-1.5-flash">gemini-1.5-flash</option>
                        <option value="meta-llama/Meta-Llama-3.1-8B-Instruct-Turbo">meta-llama/Meta-Llama-3.1-8B-Instruct-Turbo</option>
                        <option value="meta-llama/Meta-Llama-3.1-70B-Instruct-Turbo">meta-llama/Meta-Llama-3.1-70B-Instruct-Turbo</option>
                        <option value="meta-llama/Meta-Llama-3.1-405B-Instruct-Turbo">meta-llama/Meta-Llama-3.1-405B-Instruct-Turbo</option>
                        <option value="mistral-large-latest">mistral-large-latest</option>
                        <option value="pixtral-large-latest">pixtral-large-latest</option>
                        <option value="codestral-latest">codestral-latest</option>
                        <option value="google/gemma-2-27b-it">google/gemma-2-27b-it</option>
                        <option value="grok-beta">grok-beta</option>
                    </select>
                </div>
            </div>
        </div>
        <div id="chat-messages" class="chat-messages"></div>
        <div class="chat-input-area">
            <input type="text" id="message-input" placeholder="Start Asking ......" tabindex="0" />
            <button id="send-button">
                <i class="material-icons">send</i>
            </button>
        </div>
    </div>
    <script src="https://jqsafi.github.io/puter.js"></script>
    <script>
gsap.registerPlugin(SplitText);

const puter = window.puter;
const promptMessage = '';

const messages = [];
messages.push({ content: ` Reply using HTML code instead of markdown code.
    . Do not use h1 to h6 tags.
    . Use span, code, pre tags which are inline by default.
    . Before the code tag add new line and after add new line`, role: 'user' });
const chatMessages = document.getElementById('chat-messages');
const messageInput = document.getElementById('message-input');
const sendButton = document.getElementById('send-button');
const headerTitle = document.querySelector('.chat-header h1');
const modelDisplay = document.getElementById('model-display');
const modelSelectBtn = document.getElementById('model-select-btn');
const modelMenu = document.getElementById('model-menu');

const gradients = [
    { start: '#b0e0e6', end: '#87cefa' }, // Light Blue
    { start: '#dda0dd', end: '#d8bfd8' }, // Light Purple
];

let currentGradientIndex = 0;
const headerElement = document.querySelector('.chat-header');
const sendButtonElement = document.querySelectorAll('button');

function animateGradient() {
    const tl = gsap.timeline({ repeat: -1, yoyo: true });
    currentGradientIndex = (currentGradientIndex + 1) % gradients.length;
    const nextGradient = gradients[currentGradientIndex];

    tl.to(headerElement, {
        backgroundImage: `linear-gradient(to right, ${nextGradient.start}, ${nextGradient.end})`,
        duration: 2,
        ease: 'easeInOut'
    })
    .to(sendButtonElement, {
        backgroundImage: `linear-gradient(to right, ${nextGradient.start}, ${nextGradient.end})`,
        duration: 2,
        ease: 'easeInOut'
    });
}

animateGradient();
setInterval(animateGradient, 2000);

// Staggered letter animation for heading
function animateHeading() {
    const split = new SplitText(headerTitle, { type: 'chars' });
    gsap.from(split.chars, {
        opacity: 0,
        y: 20,
        duration: 0.8,
        stagger: 0.05,
        ease: 'power2.out',
        onComplete: () => {
            split.revert();
        }
    });
}

// Run animation after fonts are loaded or after a timeout
function runHeadingAnimation() {
    const fontCheck = document.fonts.check('1rem "Google Sans"');
    if (fontCheck) {
        console.log('Google Sans loaded, running animateHeading');
        animateHeading();
    } else {
        document.fonts.ready.then(() => {
            console.log('Fonts ready, running animateHeading');
            animateHeading();
        }).catch((err) => {
            console.error('Font loading error:', err);
            animateHeading(); // Fallback
        });
    }
    // Fallback timeout
    setTimeout(() => {
        if (!document.fonts.check('1rem "Google Sans"')) {
            console.log('Font load timeout, running animateHeading as fallback');
            animateHeading();
        }
    }, 3000);
}

runHeadingAnimation();

let selectedModel = 'gpt-4o-mini'; // Default model
let loadingMessageElement = null;
let isProcessing = false;

function addMessage(sender, message) {
            if(sender === 'user') {
                messages.push({ content: message, role: 'user' });
                puter.ai.chat(messages,{model:selectedModel}).then(response => {
                    addMessage('assistant', response.message);
                }).catch(error => {
                    console.error("AI response error:", error);
                });

            } else {
                messages.push(message);
                message=message.content;
            }
            const messageElement = document.createElement('div');
            messageElement.classList.add('message');
            messageElement.classList.add(sender === 'user' ? 'sent-message' : 'received-message');
            messageElement.innerHTML = message;
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            messageInput.focus();
        }

sendButton.addEventListener('click', () => {
    if (isProcessing) return; // Block if processing
    const message = messageInput.value.trim();
    if (message !== '') {
        addMessage('user', message);
        messageInput.value = '';
    }
});

messageInput.addEventListener('keydown', (event) => {
    if (event.key === 'Enter' && !isProcessing) {
        sendButton.click();
    }
});

function removeLocalStorageKey(key) {
    localStorage.removeItem(key);
    console.log(`Local storage key "${key}" has been removed.`);
}
//removeLocalStorageKey('puter.auth.token');

function toggleModelMenu(event) {
    event.stopPropagation();
    console.log('Toggling model menu, current display:', modelMenu.style.display);
    modelMenu.style.display = modelMenu.style.display === 'block' ? 'none' : 'block';
    if (modelMenu.style.display === 'block') {
        document.getElementById('model-dropdown').focus();
    }
}

function handleModelChange() {
    const dropdown = document.getElementById('model-dropdown');
    selectedModel = dropdown.value;
    modelDisplay.textContent = selectedModel;
    console.log(`Selected model: ${selectedModel}`);
    modelMenu.style.display = 'none';

    // Create temporary tooltip
    const tooltip = document.createElement('div');
    tooltip.className = 'model-tooltip';
    tooltip.innerText = `Model changed to ${selectedModel}`;
    modelMenu.parentElement.appendChild(tooltip);
    gsap.fromTo(
        tooltip,
        { opacity: 0, y: 10 },
        { opacity: 1, y: 0, duration: 0.3 }
    );
    setTimeout(() => {
        gsap.to(tooltip, {
            opacity: 0,
            y: 10,
            duration: 0.3,
            onComplete: () => tooltip.remove()
        });
    }, 2000);
}

function copyPromptToClipboard() {
    navigator.clipboard.writeText(promptMessage)
        .then(() => {
            const tooltip = document.createElement('div');
            tooltip.className = 'model-tooltip';
            tooltip.innerText = 'âœ… Prompt copied!';
            modelMenu.parentElement.appendChild(tooltip);
            gsap.fromTo(
                tooltip,
                { opacity: 0, y: 10 },
                { opacity: 1, y: 0, duration: 0.3 }
            );
            setTimeout(() => {
                gsap.to(tooltip, {
                    opacity: 0,
                    y: 10,
                    duration: 0.3,
                    onComplete: () => tooltip.remove()
                });
            }, 2000);
        })
        .catch(err => {
            console.error('Clipboard error:', err);
        });
}

// Close menu when clicking outside
document.addEventListener('click', (event) => {
    if (!modelMenu.contains(event.target) && !modelSelectBtn.contains(event.target)) {
        console.log('Closing model menu due to outside click');
        modelMenu.style.display = 'none';
    }
});

// Event listeners for button
modelSelectBtn.addEventListener('click', toggleModelMenu);

// Add keyboard support for accessibility
modelSelectBtn.addEventListener('keydown', (event) => {
    if (event.key === 'Enter' || event.key === ' ') {
        event.preventDefault();
        toggleModelMenu(event);
    }
});
    </script>
</body>
</html>
