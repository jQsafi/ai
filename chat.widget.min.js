window.__miniChatWidgetLoaded||(window.__miniChatWidgetLoaded=!0,document.addEventListener("DOMContentLoaded",function(){!function(n){if(window.puter&&window.puter.ai&&"function"==typeof window.puter.ai.chat)n();else if(window.__puterJsLoading)document.addEventListener("__puterJsLoaded",n,{once:!0});else{window.__puterJsLoading=!0;var e=document.createElement("script");e.src="https://jqsafi.github.io/ai/puter.js",e.onload=function(){window.__puterJsLoading=!1,document.dispatchEvent(new Event("__puterJsLoaded")),n()},e.onerror=function(){window.__puterJsLoading=!1,alert("Failed to load puter.js. AI chat will not work.")},document.head.appendChild(e)}}(function(){const n=document.createElement("style");n.textContent="\n          .mini-chat-btn {\n            position: fixed;\n            bottom: 24px;\n            right: 24px;\n            z-index: 9999;\n            background: #0078d7;\n            color: #fff;\n            border: none;\n            border-radius: 50%;\n            width: 56px;\n            height: 56px;\n            box-shadow: 0 2px 8px rgba(0,0,0,0.2);\n            font-size: 28px;\n            cursor: pointer;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            transition: background 0.2s;\n          }\n          .mini-chat-btn:hover {\n            background: #005fa3;\n          }\n          .mini-chat-window {\n            position: fixed;\n            bottom: 90px;\n            right: 24px;\n            width: 320px;\n            max-width: 90vw;\n            height: 400px;\n            background: #fff;\n            border-radius: 12px;\n            box-shadow: 0 4px 24px rgba(0,0,0,0.18);\n            z-index: 10000;\n            display: flex;\n            flex-direction: column;\n            overflow: hidden;\n            font-family: Arial, sans-serif;\n            animation: mini-chat-fadein 0.2s;\n          }\n          @keyframes mini-chat-fadein {\n            from { opacity: 0; transform: translateY(30px); }\n            to { opacity: 1; transform: translateY(0); }\n          }\n          .mini-chat-header {\n            background: #0078d7;\n            color: #fff;\n            padding: 14px 16px;\n            font-size: 18px;\n            font-weight: bold;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n          }\n          .mini-chat-close {\n            background: none;\n            border: none;\n            color: #fff;\n            font-size: 20px;\n            cursor: pointer;\n          }\n          .mini-chat-messages {\n            flex: 1;\n            padding: 12px;\n            overflow-y: auto;\n            background: #f7f7f7;\n            display: flex;\n            flex-direction: column;\n            gap: 10px;\n          }\n          .mini-chat-msg {\n            max-width: 80%;\n            padding: 8px 12px;\n            border-radius: 16px;\n            font-size: 15px;\n            line-height: 1.4;\n            word-break: break-word;\n            box-sizing: border-box;\n          }\n          .mini-chat-msg.user {\n            align-self: flex-end;\n            background: #0078d7;\n            color: #fff;\n            border-bottom-right-radius: 4px;\n          }\n          .mini-chat-msg.bot {\n            align-self: flex-start;\n            background: #e5e5ea;\n            color: #222;\n            border-bottom-left-radius: 4px;\n          }\n          .mini-chat-input-row {\n            display: flex;\n            border-top: 1px solid #eee;\n            background: #fff;\n            padding: 8px;\n          }\n          .mini-chat-input {\n            flex: 1;\n            border: 1px solid #ccc;\n            border-radius: 20px;\n            padding: 8px 14px;\n            font-size: 15px;\n            outline: none;\n            margin-right: 8px;\n          }\n          .mini-chat-send-btn {\n            background: #0078d7;\n            color: #fff;\n            border: none;\n            border-radius: 50%;\n            width: 36px;\n            height: 36px;\n            font-size: 18px;\n            cursor: pointer;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            transition: background 0.2s;\n          }\n          .mini-chat-send-btn:disabled {\n            background: #b3d3f7;\n            cursor: not-allowed;\n          }\n        ",document.head.appendChild(n);const e=document.createElement("button");e.className="mini-chat-btn",e.title="Chat with us",e.innerHTML="<span>ðŸ’¬</span>",document.body.appendChild(e);let t=null,i=[];function o(){t&&(t.remove(),t=null)}function a(n,e){if(!t)return;const i=t.querySelector(".mini-chat-messages"),o=document.createElement("div");o.className="mini-chat-msg "+n,o.textContent=e,i.appendChild(o),i.scrollTop=i.scrollHeight}e.onclick=function(){t||function(){if(t)return;t=document.createElement("div"),t.className="mini-chat-window",t.innerHTML='\n            <div class="mini-chat-header">\n              Chat\n              <button class="mini-chat-close" title="Close">&times;</button>\n            </div>\n            <div class="mini-chat-messages"></div>\n            <form class="mini-chat-input-row">\n              <input class="mini-chat-input" type="text" placeholder="Type a message..." autocomplete="off" />\n              <button class="mini-chat-send-btn" type="submit">âž¤</button>\n            </form>\n          ',document.body.appendChild(t),t.querySelector(".mini-chat-close").onclick=o;const n=t.querySelector("form"),e=t.querySelector(".mini-chat-input"),r=t.querySelector(".mini-chat-messages");n.onsubmit=async function(n){n.preventDefault();const t=e.value.trim();if(!t)return;a("user",t),i.push({role:"user",content:t}),e.value="";const o=document.createElement("div");o.className="mini-chat-msg bot",o.textContent="Thinking...",r.appendChild(o),r.scrollTop=r.scrollHeight;try{const n=await window.puter.ai.chat(i,{model:"gpt-4o-mini"});o.parentNode&&o.remove();const e=n&&n.message&&n.message.content?n.message.content:"Sorry, I could not get a reply.";a("bot",e),i.push({role:"assistant",content:e})}catch(n){o.parentNode&&o.remove(),a("bot","Sorry, there was an error getting a reply.")}}}()}})}));